# Cortex Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# Environment
# =============================================================================
CORTEX_ENV=development  # development, staging, production

# =============================================================================
# Qdrant Configuration
# =============================================================================

# Qdrant connection
QDRANT_HOST=localhost
QDRANT_HTTP_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_API_KEY=  # Leave empty for development, set for production

# Qdrant data path (for docker volume)
QDRANT_DATA_PATH=./data/qdrant

# Qdrant resource limits
QDRANT_CPU_LIMIT=4
QDRANT_CPU_RESERVATION=2
QDRANT_MEMORY_LIMIT=8G
QDRANT_MEMORY_RESERVATION=4G

# Qdrant logging
QDRANT_LOG_LEVEL=INFO  # TRACE, DEBUG, INFO, WARN, ERROR

# Qdrant telemetry
QDRANT_TELEMETRY_DISABLED=true

# =============================================================================
# SurrealDB Configuration
# =============================================================================

# SurrealDB connection
SURREAL_HOST=localhost
SURREAL_PORT=8000
SURREAL_USER=root
SURREAL_PASS=root
SURREAL_NAMESPACE=cortex
SURREAL_DATABASE=knowledge

# SurrealDB data path
SURREAL_DATA_PATH=./data/surrealdb

# =============================================================================
# Prometheus Configuration
# =============================================================================

PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=10GB

# =============================================================================
# Grafana Configuration
# =============================================================================

GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin  # CHANGE THIS IN PRODUCTION!
GRAFANA_ROOT_URL=http://localhost:3000

# =============================================================================
# Redis Configuration (Optional)
# =============================================================================

REDIS_PORT=6379
REDIS_PASSWORD=  # Leave empty for no password
REDIS_MAX_MEMORY=2gb

# =============================================================================
# Jaeger Configuration (Optional - for distributed tracing)
# =============================================================================

JAEGER_UI_PORT=16686
JAEGER_COLLECTOR_PORT=14268
JAEGER_OTLP_GRPC_PORT=4317
JAEGER_OTLP_HTTP_PORT=4318

# =============================================================================
# Cortex Application Configuration
# =============================================================================

# API Server
CORTEX_API_HOST=0.0.0.0
CORTEX_API_PORT=8080
CORTEX_API_WORKERS=4

# OpenAI API (for embeddings)
OPENAI_API_KEY=  # Required for embedding generation
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSIONS=1536

# Anthropic API (for Claude integration)
ANTHROPIC_API_KEY=  # Required for Claude features

# =============================================================================
# Storage Configuration
# =============================================================================

# Local storage paths
CORTEX_DATA_DIR=./data
CORTEX_CACHE_DIR=./cache
CORTEX_LOGS_DIR=./logs
CORTEX_BACKUP_DIR=./backups

# Storage limits
MAX_FILE_SIZE_MB=100
CACHE_SIZE_MB=512

# =============================================================================
# Feature Flags
# =============================================================================

# Enable/disable features
ENABLE_VECTOR_SEARCH=true
ENABLE_SEMANTIC_MEMORY=true
ENABLE_DISTRIBUTED_CACHE=false  # Set true to use Redis
ENABLE_TRACING=false  # Set true to use Jaeger
ENABLE_METRICS=true
ENABLE_API_AUTHENTICATION=false  # Enable for production

# =============================================================================
# Performance Tuning
# =============================================================================

# Ingestion settings
INGESTION_WORKERS=4
INGESTION_BATCH_SIZE=100
INGESTION_QUEUE_SIZE=1000

# Vector search settings
VECTOR_SEARCH_TIMEOUT_MS=5000
VECTOR_SEARCH_MAX_RESULTS=100

# Memory settings
MEMORY_CONSOLIDATION_INTERVAL_HOURS=24
MEMORY_RETENTION_DAYS=90

# =============================================================================
# Security
# =============================================================================

# API Keys (generate secure random strings for production)
CORTEX_API_KEY=  # API key for Cortex REST API
JWT_SECRET=  # Secret for JWT token signing (if using authentication)

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# =============================================================================
# Monitoring & Observability
# =============================================================================

# Log level
LOG_LEVEL=info  # trace, debug, info, warn, error
LOG_FORMAT=json  # json, pretty

# Health check settings
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=5

# Metrics settings
METRICS_ENABLED=true
METRICS_PORT=9091

# =============================================================================
# Backup & Recovery
# =============================================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# Snapshot settings
QDRANT_SNAPSHOT_ENABLED=true
QDRANT_SNAPSHOT_INTERVAL_HOURS=6

# =============================================================================
# Development Settings
# =============================================================================

# Development mode
DEV_MODE=true
DEV_HOT_RELOAD=true
DEV_MOCK_EMBEDDINGS=false  # Set true to use fake embeddings for testing

# Testing
TEST_MODE=false
TEST_USE_REAL_SERVICES=false

# =============================================================================
# Multi-Region / Clustering (Advanced)
# =============================================================================

# Qdrant clustering (for production multi-node setup)
QDRANT_CLUSTER_ENABLED=false
QDRANT_NODE_ID=1
QDRANT_PEERS=  # Comma-separated list of peer URLs

# Load balancing
ENABLE_LOAD_BALANCING=false
LB_STRATEGY=round_robin  # round_robin, least_connections, random

# =============================================================================
# Compliance & Privacy
# =============================================================================

# Data retention
DATA_RETENTION_DAYS=365
ANONYMOUS_USAGE_STATS=false

# PII handling
ENABLE_PII_DETECTION=false
ENABLE_DATA_ENCRYPTION=false
